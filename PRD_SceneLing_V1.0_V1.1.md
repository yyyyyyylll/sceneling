# 产品需求文档 (PRD): SceneLing V1.0 & V1.1

> **文档版本**: 1.2
> **更新日期**: 2026-01-30
> **文档状态**: 已更新（技术栈同步）

---

## 一、产品概述与背景

### 1.1 产品基本信息

| 项目 | 说明 |
|------|------|
| **产品名称** | SceneLing (Scene + English Learning) |
| **产品类型** | AI驱动的轻量化英语学习App |
| **目标平台** | iOS 17+（V1.0 首发） |
| **开发方式** | 原生 Swift + SwiftUI |

### 1.2 产品定位

SceneLing 是一款 **AI-Native（AI原生）** 的个性化英语口语学习应用。它区别于传统"功能+AI"的应用，其核心逻辑是利用 AI 重构用户与学习内容的交互方式。

### 1.3 产品愿景

- 实现"让英语学习融入用户真实生活"
- 通过拍照、识别生活场景，实现"生活即英语课堂"的沉浸式体验

### 1.4 核心价值主张 (UVP)

帮助用户将**真实的生活场景**（通过拍照捕获）转化为**个性化的英语学习语料**（通过AI生成与对话），解决传统学习中"学"与"用"严重脱节的问题。

---

### 1.5 问题分析与用户痛点

#### 核心问题
英语学习者，特别是口语初学者，普遍面临"缺乏真实语境"和"缺乏练习伙伴"的双重困境。

#### 用户痛点详述

| 痛点 | 描述 |
|------|------|
| **语境缺失与抽象学习** | 用户使用传统软件背单词，但这种方式枯燥，且抽象单词无法与真实情境建立思维绑定，导致"会背不会用" |
| **AI对话的"抽象"困境** | 现有AI对话工具讨论的话题通常"较为宏观和抽象"。AI如同"缸中之脑"，对用户的真实生活一无所知。初学者英语水平有限，无法准确描述自己的生活环境，导致对话无法与用户真实生活情境关联 |
| **高认知成本的解决方案** | 某些AI支持上传照片，但要求用户"自行筛选并上传特定场景"，需要"巨大的认知成本"，且无法实现场景的长期、持续积累 |

---

### 1.6 目标用户画像

#### 核心目标用户
- **群体**: 日常生活中有拍照习惯，且想要学习日常英语口语的年轻人群体
- **画像 (Primary)**: 18-24岁，大学生，对新事物接受度高

#### 用户需求类型

| 类型 | 描述 |
|------|------|
| **日常型** | 对口语/日常交流有兴趣，希望提升在生活中的实际运用能力 |
| **考试型** | 有四六级、考研、雅思/托福等考试需求，需要针对特定场景进行练习 |

#### 核心洞察
产品的核心用户画像（爱拍照的年轻人）与核心解决方案（拍照即学习）存在天然的行为重叠。产品不是在创造一个新行为，而是在用户已有的高频行为（拍照）上嫁接了学习价值。

---

### 1.7 版本目标

#### V1.0 (MVP) 阶段目标

| 项目 | 说明 |
|------|------|
| **核心目标** | 验证"随手拍 → AI学英语"的核心价值闭环 |
| **验证问题** | 用户是否愿意通过拍照来触发英语学习？AI生成的内容（三层卡片）对用户是否有价值？ |
| **业务收益** | 确认用户接受度，获取首批种子用户，为V1.1积累初始场景数据 |

#### V1.1 (场景对话) 阶段目标

| 项目 | 说明 |
|------|------|
| **核心目标** | 提高用户留存率与学习深度 |
| **实现路径** | 用户可基于V1.0积累的真实生活场景，进行沉浸式AI口语互动，并通过场景库进行分类复习 |
| **业务收益** | 构建"拍照(输入) -> 对话(练习) -> 复习(沉淀)"的学习闭环，提升用户粘性 |

---

## 二、V1.0 (MVP) 功能需求

### 2.1 功能列表总览（详细优先级）

> **优先级说明**
> - **P0（必须有）**：核心功能，MVP 上线必备，缺失则产品无法运行
> - **P1（应该有）**：重要功能，显著提升用户体验，MVP 尽量包含
> - **P2（可以有）**：锦上添花，可在上线后快速迭代补充

#### 账户系统

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| Apple ID 登录 | P0 | 一键登录，核心认证方式 |
| Token 持久化 | P0 | 保持登录状态 |
| 隐私政策 & 用户协议展示 | P0 | App Store 审核必须 |
| 登录异常处理（网络错误） | P1 | Toast 提示重试 |
| 退出登录功能 | P1 | 个人中心入口 |

#### 首页

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 拍照学习按钮（核心入口） | P0 | 首页核心 CTA |
| 产品名称 + 标语 | P0 | 品牌展示 |
| 底部 Tab 栏 | P0 | 首页/场景库/社区/我的 |
| 统计数据区（场景数/词汇数/天数） | P1 | 学习成就感知 |
| 最近学习区（场景卡片网格） | P1 | 快速回顾入口 |

#### 拍照识别

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 拍照功能 | P0 | 核心入口 |
| 相册上传 | P0 | 核心入口 |
| 相机权限请求 | P0 | 系统必须 |
| 相册权限请求 | P0 | 系统必须 |
| 权限拒绝后引导至设置 | P1 | 体验优化 |
| 闪光灯切换 | P2 | 非核心，可后续添加 |
| 前后摄像头切换 | P2 | 非核心，可后续添加 |

#### AI 内容生成

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 调用千问VL多模态API | P0 | 核心识别能力 |
| 词汇卡片生成（单词/音标/词性/释义） | P0 | 三层卡片之一 |
| 场景描述卡片生成（双语） | P0 | 三层卡片之一 |
| 口语例句卡片生成（3角色×2句） | P0 | 三层卡片之一 |
| 照片预览展示 | P0 | 强化场景关联 |
| 三卡片 Tab 切换 | P0 | 核心交互 |
| Loading 动画 + 文案 | P1 | 体验优化 |
| 识别失败异常处理 | P1 | 提示重新拍照 |
| 网络超时/API错误处理 | P1 | 重试机制 |
| 重新识别功能 | P2 | 非核心，可后续添加 |

#### 语音合成（TTS）

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 单词发音播放 | P0 | 词汇卡片核心功能 |
| 场景描述朗读 | P0 | 描述卡片核心功能 |
| 例句朗读 | P0 | 例句卡片核心功能 |
| 播放状态指示（按钮变化） | P1 | 体验优化 |
| 播放中可停止 | P1 | 体验优化 |
| 播放状态波形动画 | P2 | 视觉优化 |
| 后台播放支持 | P2 | 非核心 |

#### 数据存储

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 保存整个场景至场景库 | P0 | 底部「保存全部」按钮 |
| 单条词汇保存至我的笔记 | P0 | 词汇卡片右侧「+」按钮 |
| 单条例句保存至我的笔记 | P0 | 例句卡片右侧「+」按钮 |
| 照片本地存储 | P0 | 场景库展示需要 |
| 云端数据同步 | P0 | 多设备一致性 |
| 保存成功 Toast | P1 | 反馈提示 |
| 保存失败重试提示 | P1 | 异常处理 |
| 已保存状态显示（+变✓） | P1 | 避免重复保存 |
| 重复保存检测 + 提示 | P2 | 体验优化 |

#### 我的笔记

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 笔记列表展示 | P0 | 核心功能 |
| 按时间倒序排列 | P0 | 默认排序 |
| 列表项展示（英文/音标/中文/标签） | P0 | 核心信息展示 |
| 单条笔记发音按钮 | P0 | 快速发音 |
| 点击查看详情 | P0 | 核心交互 |
| 按类型筛选（全部/词汇/例句） | P1 | 筛选功能 |
| 搜索框 | P1 | 查找功能 |
| 统计区（总计/本周新增） | P2 | 数据展示 |
| 难度等级标签（A2/B1/B2） | P2 | 后续可扩展 |

#### 场景库

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 场景列表展示 | P0 | 核心功能 |
| 卡片展示（缩略图+场景标签） | P0 | 核心信息 |
| 点击进入场景详情页 | P0 | 核心交互 |
| 场景详情页（照片+三层卡片） | P0 | 核心内容展示 |
| 空状态页面（引导拍照） | P1 | 新用户引导 |
| 分类筛选（日常/学习/旅行等） | P1 | 筛选功能 |
| 搜索框 | P1 | 查找功能 |
| 瀑布流布局 | P1 | 视觉优化，可简化为网格 |
| 悬浮拍照快捷按钮 | P2 | 便捷入口 |
| AI对话占位按钮（提示即将上线） | P2 | V1.1 预告 |
| 分类标签展示 | P2 | 卡片额外信息 |

#### 个人中心

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 用户头像展示 | P0 | 基础信息 |
| 用户昵称展示 | P0 | 基础信息 |
| 我的笔记入口 | P0 | 核心入口 |
| 退出登录 | P1 | 账户管理 |
| 统计数据（单词数/场景数/天数） | P1 | 成就展示 |
| 学习设置入口 | P2 | V1.0 可为空页面 |
| 关于我们 | P2 | 非核心 |

#### 社区（占位）

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| Tab 入口展示 | P1 | 保留入口位置 |
| 占位页面（即将上线文案） | P2 | 预告展示 |

#### 离线模式

| 功能点 | 优先级 | 说明 |
|--------|--------|------|
| 笔记文字内容本地缓存 | P1 | 离线查看 |
| 场景照片本地存储 | P0 | 保存时已实现 |
| 网络状态检测 | P1 | 状态感知 |
| 无网络 Toast 提示 | P1 | 用户告知 |
| 离线功能不可用提示 | P2 | 细化提示 |

---

### 2.1.1 功能优先级汇总

| 优先级 | 功能数量 | 核心内容 |
|--------|----------|----------|
| **P0** | 35+ | 登录、拍照、AI生成、三层卡片、TTS发音、保存、列表展示 |
| **P1** | 25+ | 异常处理、搜索筛选、统计展示、状态反馈、空状态 |
| **P2** | 15+ | 动画效果、后台播放、摄像头切换、闪光灯、细化提示 |

**开发建议**
- **第一阶段**：完成所有 P0 功能，形成可用的最小闭环
- **第二阶段**：补充 P1 功能，提升用户体验
- **第三阶段**：根据反馈选择性添加 P2 功能

---

### 2.2 用户流程图 (V1.0)

```
┌─────────────┐
│   启动App   │
└──────┬──────┘
       ▼
┌─────────────┐    首次使用
│  登录判断   │──────────────▶ Apple ID 登录
└──────┬──────┘
       │ 已登录
       ▼
┌─────────────┐
│    首页     │
│ (拍照按钮)  │
└──────┬──────┘
       │ 点击拍照/上传
       ▼
┌─────────────┐
│  拍照/相册  │
└──────┬──────┘
       │ 确认照片
       ▼
┌─────────────┐
│  Loading    │ ◀── 调用千问VL多模态API
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ 识别结果页  │
│ (三层卡片)  │
└──────┬──────┘
       │
       ├──▶ 切换卡片（词汇/描述/例句）
       ├──▶ 点击发音（TTS）
       │
       │ 点击保存
       ▼
┌─────────────┐
│  保存成功   │──▶ 数据存入生词本 + 场景库
└─────────────┘
```

---

### 2.3 功能详细说明

#### 2.3.1 账户系统：Apple ID 登录

**需求描述**
用户通过 Apple ID 一键登录，无需手机号或密码，降低注册门槛。

**功能逻辑**
- 首次打开 App 展示登录页面
- 点击「通过 Apple 登录」按钮，调起系统 Apple ID 授权
- 授权成功后，后端创建/获取用户账户，返回 Token
- 后续请求携带 Token 进行身份验证

**界面要素**
- 产品 Logo + 标语
- 「通过 Apple 登录」按钮（Sign in with Apple，遵循 Apple 设计规范）
- 隐私政策 & 用户协议链接

**异常处理**

| 场景 | 处理方式 |
|------|----------|
| 用户取消授权 | 保持在登录页，不做提示 |
| 网络错误 | Toast 提示"网络连接失败，请重试" |
| 服务端错误 | Toast 提示"登录失败，请稍后重试" |

---

#### 2.3.2 核心功能：拍照与上传

**需求描述**
用户通过拍照或从相册选择图片，作为 AI 学习内容生成的输入。

**界面与交互**

**首页**
- 顶部：产品名称「SceneLing」+ 标语"生活随手拍，地道学英语"
- 中部核心：大号「拍照学习」按钮（核心入口）
- 统计数据区：显示「X个场景 | X个词汇 | X天进度」
- 最近学习区：展示最近保存的场景卡片网格
- 底部 Tab 栏：首页 | 场景库 | 社区 | 我的
  - 注：社区功能 V1.0 展示入口，内容显示"即将上线"

**拍照页**
- 顶部提示语："生活随手拍，地道学英语"
- 中部：相机取景框
- 底部：拍照按钮 | 相册入口
- 支持闪光灯切换、前后摄像头切换

**功能逻辑**

| 操作 | 说明 |
|------|------|
| 拍照 | 调用系统相机，拍照后直接进入识别流程 |
| 上传 | 打开系统相册，选择单张图片 |
| 图片要求 | 单张图片，不限制大小/分辨率，不支持裁剪 |

**权限处理**

| 权限 | 首次请求时机 | 拒绝后处理 |
|------|--------------|------------|
| 相机权限 | 点击拍照按钮 | 弹窗引导前往设置开启 |
| 相册权限 | 点击相册入口 | 弹窗引导前往设置开启 |

---

#### 2.3.3 核心功能：AI 内容生成（三层卡片）

**需求描述**
基于用户上传的照片，AI（千问VL多模态）智能理解场景，生成三个维度的学习内容。

**识别结果结构**

| 层级 | 内容 | 数量 |
|------|------|------|
| **场景标签** | 核心场景识别（如 Coffee Shop） | 1个 |
| **物品标签** | 场景中的关键物品（如 Laptop, Notebook） | 2-5个 |

**三层卡片内容**

**卡片1：词汇卡片 (Vocabulary)**

| 字段 | 说明 | 示例 |
|------|------|------|
| 英文单词 | 场景/物品标签 | Coffee Shop |
| 音标 | 国际音标 | /ˈkɔːfi ʃɑːp/ |
| 词性 | 词性标注 | n. (noun) |
| 中文释义 | 中文翻译 | 咖啡店 |

- 展示 1个场景词 + 2-5个物品词
- 每个词汇可单独点击播放发音

**卡片2：场景描述卡片 (Description)**

| 字段 | 说明 |
|------|------|
| 英文描述 | AI 生成的场景描述，≤50个单词 |
| 中文翻译 | 对应中文翻译 |

示例：
> **English**: This is a cozy coffee shop with warm lighting. A young person is sitting by the window, working on their laptop with a notebook beside them.
>
> **中文**: 这是一家温馨的咖啡店，灯光柔和。一个年轻人坐在窗边，用笔记本电脑工作，旁边放着一本笔记本。

**卡片3：口语例句卡片 (Expression)**

| 字段 | 说明 |
|------|------|
| 角色 | AI 根据场景自动推断的 4 个典型角色 |
| 例句 | 每个角色 2 句常用口语，共 8 句 |
| 中文翻译 | 每句配对应中文翻译 |

示例（Coffee Shop 场景）：

> **👨‍💼 Barista (咖啡师)**
> - "Hi, what can I get for you today?" — 你好，今天想喝点什么？
> - "Would you like that for here or to go?" — 您是在这儿喝还是带走？
>
> **👤 Customer (顾客)**
> - "I'll have a medium latte, please." — 请给我一杯中杯拿铁。
> - "Can I also get a blueberry muffin?" — 我还能要一个蓝莓玛芬吗？
>
> **👫 Friend (朋友)**
> - "This place has great coffee!" — 这家店的咖啡很棒！
> - "Shall we sit by the window?" — 我们坐窗边好吗？
>
> **💼 Manager (店长)**
> - "Let me know if you need anything else." — 如果需要其他帮助请告诉我。
> - "We have a new seasonal drink today." — 我们今天有新的季节限定饮品。

**界面交互**

- 顶部：照片预览（强化场景关联）
- 中部：三卡片切换（Tab 形式：词汇 | 描述 | 例句）
- 底部操作栏：
  - 🔊 发音按钮（播放当前卡片内容）
  - 💾 保存全部按钮（保存整个场景）
  - 🔄 重新识别（可选）

**卡片内保存交互**
- 词汇卡片：每个词汇右侧有「+」按钮，点击可单独保存该词汇至我的笔记
- 例句卡片：每句例句右侧有「+」按钮，点击可单独保存该例句至我的笔记
- 保存后按钮变为「✓」状态，表示已保存

**加载状态**

- 调用 AI 期间显示 Loading 动画
- 预计耗时 2-5 秒
- Loading 文案："AI 正在理解这个场景..."

**异常处理**

| 场景 | 处理方式 |
|------|----------|
| 识别失败（图片模糊/无明确场景） | 提示"无法识别该图片，请重新拍照或上传" |
| 网络超时 | 提示"网络超时，请重试"，提供重试按钮 |
| API 错误 | 提示"服务暂时不可用，请稍后重试" |

---

#### 2.3.4 核心功能：语音合成（TTS）

**需求描述**
用户可点击发音按钮，听到当前内容的美式英语朗读，发音自然地道。

**技术选型**
- 主要服务：通义千问 TTS（qwen-tts-realtime，实时语音合成）
- 备选方案：iOS 原生 AVSpeechSynthesizer（离线可用）
- 口音：美式英语（Serena/Ethan 音色）
- 风格：神经网络语音，自然流畅

**功能逻辑**

| 卡片类型 | 发音内容 |
|----------|----------|
| 词汇卡片 | 逐个朗读单词 |
| 描述卡片 | 朗读完整英文描述 |
| 例句卡片 | 朗读当前显示的例句 |

**交互细节**
- 点击发音按钮，按钮变为播放状态（显示波形动画）
- 播放期间再次点击可停止
- 支持后台播放

---

#### 2.3.5 核心功能：保存

**需求描述**
用户点击保存后，学习内容同步至云端，支持后续复习。

**功能逻辑**

点击「保存」按钮后，系统执行：

| 动作 | 存储位置 | 存储内容 |
|------|----------|----------|
| 保存至我的笔记 | 云端数据库 | 词汇/例句（单词、音标、词性、释义、例句等） |
| 保存至场景库 | 云端数据库 | 场景标签、三层卡片完整内容、本地照片路径引用 |
| 照片本地保存 | iOS 本地存储 | 原图（用于场景库展示） |

**交互反馈**
- 保存成功：Toast 提示"保存成功"
- 保存失败：Toast 提示"保存失败，请重试"
- 重复保存：Toast 提示"该内容已保存"

---

#### 2.3.6 我的笔记

**需求描述**
用户可查看所有已保存的词汇和例句，进行复习和管理。

**界面设计**
- 入口：个人中心 →「我的笔记」（V1.0 不在底部Tab，社区占位）
- 顶部：搜索框
- 统计区：显示「总计 X 条 | 本周新增 X 条」
- 筛选Tab：全部 | 词汇 | 例句 | 自由笔记
- 列表布局，每条笔记显示：
  - 英文内容（单词/例句）
  - 音标（词汇类型时显示）
  - 中文释义/翻译
  - 标签：类型（词汇/例句）+ 来源场景 + 难度等级（A2/B1/B2）
  - 发音按钮

**功能逻辑**
- 列表按保存时间**倒序**排列（最新在前）
- 支持搜索笔记内容
- 支持按类型筛选
- 点击条目可查看详情
- 右下角「+」按钮：手动添加笔记（V1.1）

**V1.0 限制**
- 不支持删除
- 不支持编辑
- 手动添加功能 V1.1 开放

---

#### 2.3.7 场景库（V1.0 预览版）

**需求描述**
展示用户已保存的场景卡片，为 V1.1 AI 对话功能做铺垫。

**界面设计**
- 入口：底部 Tab 栏「场景库」
- 顶部：搜索框
- 分类筛选：全部 | 日常 | 学习 | 旅行 | 购物 | 其他
- 布局：瀑布流卡片（类 Pinterest 风格）
- 卡片内容：
  - 场景照片缩略图
  - 场景标签（如 Coffee Shop）
  - 分类标签（如"日常"）
- 悬浮按钮：底部中央「拍照」快捷入口

**功能逻辑**
- 支持分类筛选场景
- 点击卡片 → 进入场景详情页
- 场景详情页展示：
  - 照片大图
  - 三层卡片内容
  - 「AI 对话」按钮（V1.0 点击提示"即将上线"）
  - 「对话记录」入口（V1.1，显示该场景的历史对话列表）

**空状态**
- 无保存场景时显示空状态插画
- 文案："还没有场景，去拍一张吧！"
- 提供「去拍照」按钮

---

#### 2.3.8 社区（V1.0 占位）

**需求描述**
社区功能为后续版本规划，V1.0 展示入口但内容暂未开放。

**界面设计**
- 入口：底部 Tab 栏「社区」
- V1.0 显示：占位页面
  - 插画/图标
  - 文案："社区功能即将上线，敬请期待！"
  - 可选：预告功能亮点

**后续规划**
- V2.1 开放社区功能：用户分享学习成果、场景卡片等

---

#### 2.3.9 个人中心

**需求描述**
展示用户基本信息和功能入口。

**界面要素**
- 用户头像（Apple ID 头像或默认头像）
- 用户昵称（Apple ID 昵称或"SceneLing 用户"）
- 统计数据：已学单词数 | 已保存场景数 | 学习天数
- 功能入口：
  - 我的笔记
  - 对话记录（V1.1，查看所有场景的对话历史）
  - 学习设置
  - 关于我们
  - 退出登录

---

#### 2.3.10 离线模式

**需求描述**
无网络时，用户仍可查看已保存的本地内容。

**功能范围**

| 功能 | 离线可用 |
|------|----------|
| 查看我的笔记 | ✅（文字内容已缓存） |
| 查看场景库 | ✅（照片本地存储） |
| 播放发音 | ❌（需联网） |
| 拍照识别 | ❌（需联网） |
| AI 对话 | ❌（需联网） |

**交互处理**
- 进入 App 时检测网络状态
- 无网络时 Toast 提示："当前无网络连接，部分功能不可用"
- 点击需联网功能时，Toast 提示："请连接网络后使用"

---

## 三、V1.1 功能需求（场景对话）

### 3.1 功能列表总览

| 功能模块 | 功能点 | 优先级 | 说明 |
|----------|--------|--------|------|
| **场景库升级** | 完整场景库 | P0 | 主题分类、筛选 |
| **AI 对话** | 场景对话 | P0 | 基于场景的角色扮演对话 |
| **角色选择** | 对话角色 | P0 | 自动匹配+用户可选+自定义 |
| **对话记录** | 历史记录 | P1 | 保存和复盘对话 |
| **对话记录入口** | 场景详情页入口 | P1 | 查看该场景的对话历史 |
| **对话记录入口** | 个人中心入口 | P1 | 查看所有对话历史 |
| **难度分级** | CEFR 等级 | P2 | A2/B1/B2 难度调节（低优先级，后续迭代） |
| **复习提醒** | 推送通知 | P2 | 间隔复习提醒 |

---

### 3.2 用户流程图 (V1.1 AI 对话)

```
┌─────────────┐
│   场景库    │
│ (瀑布流卡片) │
└──────┬──────┘
       │ 点击场景卡片
       ▼
┌─────────────┐
│ 场景详情页  │
└──────┬──────┘
       │ 点击「AI对话」
       ▼
┌─────────────┐
│  角色选择   │ ◀── 自动匹配3个角色 + 自定义选项
└──────┬──────┘
       │ 选择角色
       ▼
┌─────────────┐
│  AI对话页   │
│ (顶部：场景照片) │
└──────┬──────┘
       │
       ├──▶ AI 发起问候
       ├──▶ 用户回复（文字/语音）
       ├──▶ AI 继续对话
       │    ...多轮对话...
       │
       │ 结束对话
       ▼
┌─────────────┐
│ 对话记录保存 │
└─────────────┘
```

---

### 3.3 功能详细说明

#### 3.3.1 场景库（完整版）

**需求描述**
V1.1 场景库支持主题分类和筛选，便于用户管理和查找场景。

**界面升级**
- 顶部新增分类筛选：全部 | 学习 | 生活 | 旅行 | 美食 | 其他
- 分类标签由 AI 在保存时自动生成
- 支持用户手动修改分类（后续版本）

**卡片交互升级**
- 点击卡片 → 场景详情页
- 场景详情页「AI 对话」按钮可正常使用

---

#### 3.3.2 AI 对话（核心功能）

**需求描述**
用户选择任意一个已保存的场景，即可与 AI 进行基于该场景的、有上下文的、角色扮演式的口语练习。

**角色选择机制（双向选择）**

| 步骤 | 说明 |
|------|------|
| 1. 自动匹配 | AI 根据场景自动推断 4 个典型角色（如顾客、咖啡师、朋友、店员） |
| 2. 选择用户角色 | 用户选择自己要扮演的角色 |
| 3. 选择AI角色 | 用户选择 AI 要扮演的角色 |
| 4. 开始对话 | 确认后进入对话界面 |

**角色选择界面**
- 标题："选择角色"
- 场景信息：场景照片缩略图 + 场景标签 + 拍摄时间
- 「选择你的角色」区域：
  - 4 个角色选项（图标 + 名称）
  - 用户点选其一
- 「选择AI角色」区域：
  - 同样 4 个角色选项
  - 用户点选其一（不可与用户角色相同）
- 确认按钮："开始对话"

示例（Coffee Shop 场景）：
> 选择你的角色：👤 顾客 | 👨‍🍳 咖啡师 | 👫 朋友 | 💼 店员
> 选择AI角色：👤 顾客 | 👨‍🍳 咖啡师 | 👫 朋友 | 💼 店员

**对话界面**

| 区域 | 内容 |
|------|------|
| **顶部锚点** | 场景照片缩略图 + 场景标签 + 当前角色 |
| **对话区域** | 气泡式对话（AI 靠左，用户靠右） |
| **底部输入** | 文字输入框 + 语音输入按钮 |

**顶部锚点设计要点**
这个"照片锚点"是本产品与竞品（豆包、Speak）的最大交互差异。它时刻提醒用户和 AI "我们在什么场景下对话"，解决了"抽象对话"的痛点。

**对话逻辑**

| 步骤 | 说明 |
|------|------|
| 1 | AI 根据场景和角色，发起第一句问候 |
| 2 | 用户通过文字或语音回复 |
| 3 | AI 基于上下文继续对话 |
| 4 | 支持多轮连续对话 |
| 5 | 用户可随时点击「结束对话」 |

**AI Prompt 设计框架**

```
你现在是一名 [角色名称]。

场景背景：
- 地点：[场景标签]
- 场景描述：[AI生成的场景描述]

对话要求：
- 使用日常英语，符合 [CEFR等级] 水平
- 扮演好你的角色，保持对话自然
- 每次回复 1-3 句话，不要太长
- 如果用户表达有语法错误，委婉地在对话中示范正确用法

请发起第一句对话。
```

**输入方式**

| 方式 | 说明 |
|------|------|
| **文字输入** | 默认方式，键盘输入 |
| **语音输入** | 点击麦克风按钮，实时显示识别文字，松开后自动分句 |

语音识别技术（混合方案）：
- **实时显示**：iOS Speech Framework (SFSpeechRecognizer)，边说边显示
- **最终分句**：通义千问 Paraformer，录音结束后自动添加标点和分句

**对话结束与保存**
- 点击「结束」按钮
- 弹窗确认："结束本次对话？"
- 确认后，自动跳转至「对话报告」页面

**对话报告页面**

对话结束后，系统自动生成学习报告，帮助用户了解本次对话表现。

| 模块 | 内容 |
|------|------|
| **综合评分** | 0-100分，配合鼓励文案（如"做得很棒！继续加油"） |
| **对话统计** | 对话时长（秒）、对话轮数 |
| **详细评分** | 4个维度评分（进度条形式）：<br>- 表达能力<br>- 流利程度<br>- 词汇丰富度<br>- 语法准确度 |
| **AI反馈** | AI 生成的文字反馈（如"词汇使用丰富，表达清晰流畅"） |

**报告页面操作**
- 「查看对话记录」：跳转查看本次完整对话
- 「再练一次」：重新开始同场景对话
- 「返回」：返回场景详情页

---

#### 3.3.3 对话记录

**需求描述**
用户可查看历史对话记录，进行复盘和回顾。

**入口设计**

| 入口 | 位置 | 展示内容 |
|------|------|----------|
| 场景详情页 | 「AI 对话」按钮下方 | 该场景的对话历史列表 |
| 个人中心 | 「我的笔记」下方 | 所有场景的对话历史列表 |

**对话记录列表**
- 卡片展示：场景缩略图 + 场景标签 + 对话时间 + 评分
- 按时间倒序排列
- 点击进入对话详情

**对话详情页**
- 顶部：场景照片 + 场景标签 + 角色信息（我：顾客，AI：咖啡师）
- 中部：完整对话记录（气泡形式）
- 底部：对话报告摘要（评分 + 各维度得分）
- 操作按钮：「再练一次」

---

#### 3.3.4 难度分级（P2，后续迭代）

**需求描述**
用户可设置自己的英语水平，AI 生成内容和对话难度随之调整。

> ⚠️ **优先级说明**：此功能为 P2 优先级，V1.1 可暂不实现，默认使用 B1 中级难度。

**等级设置**

| 等级 | 对应水平 | 说明 |
|------|----------|------|
| A2 | 初级 | 基础词汇，简单句型 |
| B1 | 中级（默认） | 日常交流词汇，复合句 |
| B2 | 中高级 | 丰富词汇，复杂表达 |

**设置入口**
- 个人中心 → 学习设置 → 英语水平

**影响范围**
- 三层卡片生成的词汇和句型复杂度
- AI 对话时使用的词汇和表达方式

---

#### 3.3.5 复习提醒

**需求描述**
通过推送通知，提醒用户复习生词本中的词汇。

**功能逻辑**
- 采用简单的间隔复习算法（固定间隔：1天、3天、7天）
- 每日推送提醒用户复习 5 个生词
- 用户可在设置中开关复习提醒

**复习模式**
- 闪卡形式：显示英文 → 点击翻转显示中文释义
- 显示例句
- 用户自评：认识 / 模糊 / 不认识

---

## 四、技术架构

### 4.1 整体架构图

```
┌─────────────────────────────────────────────────────────────┐
│                   iOS App (Swift, iOS 17+)                   │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │
│  │ 拍照模块 │  │ 学习模块 │  │ 对话模块 │  │ 个人中心 │        │
│  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘        │
│       └────────────┴────────────┴────────────┘              │
│                           │                                  │
│  ┌─────────────┐   ┌──────┴──────┐   ┌─────────────┐        │
│  │ 语音识别    │   │  本地存储    │   │ 本地 TTS    │        │
│  │ (Speech    │   │ (SwiftData) │   │ (AVSpeech   │        │
│  │ Framework) │   │  - 照片缓存  │   │ Synthesizer)│        │
│  └─────────────┘   │  - 离线数据  │   └─────────────┘        │
│                    └─────────────┘                          │
└─────────────────────────────┬───────────────────────────────┘
                              │ HTTPS / SSE
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                  阿里云轻量应用服务器 (2核4G)                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                   FastAPI 后端                       │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐          │   │
│  │  │ 用户服务  │  │ 场景服务  │  │ 对话服务  │          │   │
│  │  └────┬─────┘  └────┬─────┘  └────┬─────┘          │   │
│  │       └─────────────┼─────────────┘                 │   │
│  └─────────────────────┼───────────────────────────────┘   │
│                        │                                    │
│  ┌─────────────────────┼───────────────────────────────┐   │
│  │                     ▼                                │   │
│  │           SQLite / PostgreSQL                        │   │
│  │         用户数据 / 场景数据 / 对话记录                 │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────┬───────────────────────────────┘
                              │
       ┌─────────────┼─────────────┬─────────────┐
       ▼             ▼             ▼             ▼
┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐
│ 千问VL API │ │qwen-turbo │ │ 千问 TTS  │ │SenseVoice │
│(多模态理解)│ │ (AI 对话) │ │ (语音合成)│ │ (语音识别)│
│           │ │ SSE 流式  │ │  实时合成 │ │ 带标点分句│
│备选:      │ └───────────┘ └───────────┘ └───────────┘
│智谱GLM-4V │
└───────────┘
```

### 4.2 技术选型确认

| 层级 | 技术选型 | 说明 |
|------|----------|------|
| **客户端** | iOS 原生 (Swift) | SwiftUI，最低支持 iOS 17+ |
| **本地存储** | SwiftData | Apple 新一代数据框架，API 简洁 |
| **后端框架** | FastAPI (Python) | 轻量、异步，搭配 SQLAlchemy ORM |
| **数据库** | SQLite / PostgreSQL | 开发环境用 SQLite，生产环境用 PostgreSQL |
| **部署** | 阿里云轻量应用服务器 | 2核4G，约 60元/月 |
| **图像理解** | 千问VL 多模态 (DashScope) | 一次调用完成识别+生成 |
| **图像理解(备选)** | 智谱GLM-4V | 架构预留切换能力 |
| **AI 对话** | 通义千问 qwen-turbo | 基于场景的角色扮演对话，支持 SSE 流式输出 |
| **语音合成** | 通义千问 TTS + iOS 原生 AVSpeechSynthesizer | 后端用千问实时TTS，客户端可用原生TTS降级 |
| **语音识别** | iOS Speech Framework + 通义千问 SenseVoice | 混合方案：iOS原生实时显示 + 后端SenseVoice最终分句标点 |
| **登录认证** | Apple ID | Sign in with Apple |

### 4.3 技术选型决策说明

| 决策点 | 选择 | 理由 |
|--------|------|------|
| **Serverless vs 轻量服务器** | 轻量服务器 | 避免冷启动延迟、数据库连接池问题，调试更简单 |
| **CoreData vs SwiftData** | SwiftData | API 更现代简洁，开发效率高（需 iOS 17+） |
| **阿里云TTS vs 千问TTS** | 千问TTS | 统一使用通义千问生态，减少API对接复杂度 |
| **ASR方案选择** | 混合方案（iOS原生 + SenseVoice） | iOS实时显示体验好 + SenseVoice原生支持标点 |
| **单一AI vs 预留切换** | 预留切换 | 降低供应商风险，千问VL主选 + 智谱GLM-4V备选 |
| **同步对话 vs 流式对话** | SSE 流式 | 提升用户体验，实时显示 AI 回复 |

---

## 五、数据结构设计

### 5.1 用户表 (users)

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| apple_id | String | Apple ID 唯一标识 |
| nickname | String | 用户昵称 |
| avatar_url | String | 头像 URL |
| cefr_level | String | 英语等级 (A2/B1/B2)，默认 B1 |
| created_at | Timestamp | 创建时间 |
| updated_at | Timestamp | 更新时间 |

### 5.2 场景表 (scenes)

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| user_id | UUID | 用户 ID（外键） |
| local_photo_id | String | 本地照片标识（客户端生成） |
| scene_tag | String | 场景标签（英文） |
| scene_tag_cn | String | 场景标签（中文） |
| object_tags | JSON | 物品标签数组 |
| description_en | Text | 英文描述 |
| description_cn | Text | 中文描述 |
| expressions | JSON | 例句数据（含角色、例句、翻译） |
| category | String | 分类（学习/生活/旅行/美食/其他） |
| created_at | Timestamp | 创建时间 |

### 5.3 笔记表 (notes)

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| user_id | UUID | 用户 ID（外键） |
| scene_id | UUID | 关联场景 ID（外键，可为空） |
| type | String | 类型：vocabulary / expression |
| content_en | String | 英文内容（单词或例句） |
| content_cn | String | 中文内容（释义或翻译） |
| phonetic | String | 音标（词汇类型时有值） |
| pos | String | 词性（词汇类型时有值） |
| role | String | 角色名（例句类型时有值） |
| review_count | Integer | 复习次数，默认 0 |
| next_review_at | Timestamp | 下次复习时间 |
| created_at | Timestamp | 创建时间 |

### 5.4 对话记录表 (conversations) - V1.1

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| user_id | UUID | 用户 ID（外键） |
| scene_id | UUID | 场景 ID（外键） |
| user_role | String | 用户扮演的角色 |
| ai_role | String | AI 扮演的角色 |
| messages | JSON | 对话消息数组 |
| score | Integer | 综合评分（0-100） |
| duration | Integer | 对话时长（秒） |
| turn_count | Integer | 对话轮数 |
| created_at | Timestamp | 创建时间 |

### 5.5 expressions JSON 结构示例

```json
{
  "roles": [
    {
      "role_en": "Barista",
      "role_cn": "店员",
      "sentences": [
        {
          "en": "Hi, what can I get for you today?",
          "cn": "你好，今天想喝点什么？"
        },
        {
          "en": "Would you like that for here or to go?",
          "cn": "您是在这儿喝还是带走？"
        }
      ]
    },
    {
      "role_en": "Customer",
      "role_cn": "顾客",
      "sentences": [...]
    },
    {
      "role_en": "Friend",
      "role_cn": "朋友",
      "sentences": [...]
    }
  ]
}
```

---

## 六、接口设计

### 6.1 接口列表

| 模块 | 接口 | Method | 说明 | 版本 |
|------|------|--------|------|------|
| 认证 | /api/auth/apple | POST | Apple ID 登录 | V1.0 |
| 场景 | /api/scenes/analyze | POST | 上传图片，AI 分析生成内容 | V1.0 |
| 场景 | /api/scenes | POST | 保存场景 | V1.0 |
| 场景 | /api/scenes | GET | 获取场景列表 | V1.0 |
| 场景 | /api/scenes/{id} | GET | 获取场景详情 | V1.0 |
| 笔记 | /api/notes | GET | 获取我的笔记列表 | V1.0 |
| 笔记 | /api/notes | POST | 保存单条笔记（词汇/例句） | V1.0 |
| 笔记 | /api/notes/{id} | GET | 获取笔记详情 | V1.0 |
| 笔记 | /api/notes/{id} | DELETE | 删除笔记 | V1.1 |
| TTS | /api/tts | POST | 文本转语音 | V1.0 |
| 对话 | /api/conversations/start | POST | 开始对话 | V1.1 |
| 对话 | /api/conversations/message | POST | 发送消息 | V1.1 |
| 对话 | /api/conversations/end | POST | 结束对话 | V1.1 |
| 对话 | /api/conversations | GET | 获取所有对话记录列表 | V1.1 |
| 对话 | /api/conversations/{id} | GET | 获取单次对话详情 | V1.1 |
| 对话 | /api/scenes/{scene_id}/conversations | GET | 获取某场景的对话记录 | V1.1 |
| 用户 | /api/users/profile | GET | 获取用户信息 | V1.0 |
| 用户 | /api/users/settings | PUT | 更新用户设置 | V1.1 |

### 6.2 核心接口详细说明

#### 6.2.1 POST /api/auth/apple

**请求**
```json
{
  "identity_token": "Apple 返回的 identityToken",
  "authorization_code": "Apple 返回的 authorizationCode",
  "full_name": "用户全名（首次授权时有）",
  "email": "用户邮箱（首次授权时有）"
}
```

**响应**
```json
{
  "code": 200,
  "data": {
    "token": "JWT Token",
    "user": {
      "id": "uuid",
      "nickname": "用户昵称",
      "avatar_url": "头像URL",
      "is_new_user": true
    }
  }
}
```

#### 6.2.2 POST /api/scenes/analyze

**请求**
```
Content-Type: multipart/form-data
- image: 图片文件
- cefr_level: 用户英语等级 (可选，默认 B1)
```

**响应**
```json
{
  "code": 200,
  "data": {
    "scene_tag": "Coffee Shop",
    "scene_tag_cn": "咖啡店",
    "object_tags": [
      {"en": "Laptop", "cn": "笔记本电脑", "phonetic": "/ˈlæptɒp/", "pos": "n."},
      {"en": "Notebook", "cn": "笔记本", "phonetic": "/ˈnoʊtbʊk/", "pos": "n."}
    ],
    "description": {
      "en": "This is a cozy coffee shop...",
      "cn": "这是一家温馨的咖啡店..."
    },
    "expressions": {
      "roles": [...]
    },
    "category": "生活"
  }
}
```

#### 6.2.3 POST /api/tts

**请求**
```json
{
  "text": "Hello, how are you?",
  "voice": "en-US-female"
}
```

**响应**
```json
{
  "code": 200,
  "data": {
    "audio_url": "https://xxx.oss.com/audio/xxx.mp3"
  }
}
```

---

## 七、埋点需求

> **设计原则**：MVP 阶段只追踪核心漏斗关键节点，验证业务假设。其他埋点等有具体分析需求再加。

---

### 7.1 埋点公共参数

每个埋点事件自动携带：

| 参数 | 类型 | 说明 |
|------|------|------|
| user_id | String | 用户 ID |
| device_id | String | 设备唯一标识（IDFV） |
| session_id | String | 会话 ID（每次启动生成） |
| timestamp | Long | 事件时间戳（毫秒） |
| app_version | String | App 版本号 |
| os_version | String | iOS 系统版本 |

---

### 7.2 模块一：拍照学习漏斗（9 个埋点）

> **验证假设**：用户是否愿意通过拍照学习英语？

**漏斗路径**：
```
启动 → 点击拍照 → 完成选图 → 分析成功 → 保存场景
```

| # | 事件名 | 触发时机 | 核心参数 | 追踪目的 |
|---|--------|----------|----------|----------|
| 1 | `app_launch` | App 启动完成 | `is_first_launch` | DAU、新用户识别 |
| 2 | `login_result` | 登录流程结束 | `success`, `is_new_user`, `error_code` | 登录转化 |
| 3 | `photo_click` | 点击拍照学习按钮 | - | 拍照意愿 |
| 4 | `photo_complete` | 完成选图 | `source`(camera/album) | 选图完成率 |
| 5 | `analyze_result` | 分析结束 | `success`, `duration_ms`, `scene_tag`, `error_code` | 分析成功率 |
| 6 | `tts_play` | 点击播放语音 | `type`(word/description/expression) | 发音学习行为 |
| 7 | `scene_save` | 保存场景到库 | `scene_id`, `scene_tag` | 场景保存率 |
| 8 | `note_save` | 保存笔记 | `type`(vocabulary/expression) | 笔记保存行为 |
| 9 | `result_close` | 关闭结果页 | `stay_duration_ms`, `saved_scene`, `saved_note_count` | 内容吸引度 |

---

### 7.3 模块二：AI 对话漏斗（7 个埋点）

> **验证假设**：用户是否愿意用 AI 进行对话练习？

**漏斗路径**：
```
点击对话 → 选择角色 → 开始对话 → 发送消息 → 结束对话
```

| # | 事件名 | 触发时机 | 核心参数 | 追踪目的 |
|---|--------|----------|----------|----------|
| 1 | `dialog_click` | 点击进入对话 | `source`(result/scene_detail/scene_card) | 对话意愿 |
| 2 | `dialog_start` | 点击「开始对话」 | `scene_id`, `user_role`, `ai_role` | 角色选择完成率 |
| 3 | `message_send` | 发送消息 | `input_type`(text/voice), `turn_number` | 对话参与度 |
| 4 | `message_result` | AI 回复结束 | `success`, `response_ms`, `turn_number`, `error_code` | AI 响应质量 |
| 5 | `voice_result` | 语音输入结束 | `success`, `duration_ms`, `error_code` | 语音识别成功率 |
| 6 | `audio_play` | 点击播放音频 | `type`(ai/user) | 听力学习行为 |
| 7 | `dialog_end` | 对话结束 | `total_turns`, `duration_ms`, `voice_count`, `text_count` | 对话深度 |

---

### 7.4 留存追踪（1 个埋点）

| # | 事件名 | 触发时机 | 核心参数 | 追踪目的 |
|---|--------|----------|----------|----------|
| 1 | `session_end` | App 进入后台 | `session_duration_ms`, `scene_count`, `dialog_count` | 单次使用深度 |

---

### 7.5 埋点汇总

| 模块 | 埋点数 |
|------|--------|
| 拍照学习漏斗 | 9 |
| AI 对话漏斗 | 7 |
| 留存追踪 | 1 |
| **合计** | **17** |

---

### 7.6 核心业务指标

#### 7.6.1 模块一：拍照学习

**北极星指标**

| 指标 | 定义 | 计算公式 | 目标 |
|------|------|----------|------|
| **日均有效学习数** | 每 DAU 每天完成的有效学习次数 | analyze_result(success) 次数 / DAU | ≥ 2 |

**北极星拆解**

```
日均有效学习数 = 拍照意愿 × 选图完成率 × 分析成功率 × 日均使用次数
```

| 子指标 | 计算公式 | 目标 |
|--------|----------|------|
| 拍照意愿 | photo_click UV / app_launch UV | ≥ 40% |
| 选图完成率 | photo_complete UV / photo_click UV | ≥ 75% |
| 分析成功率 | analyze_result(success) / analyze_result | ≥ 95% |
| TTS 使用率 | tts_play UV / analyze_result(success) UV | ≥ 30% |
| 场景保存率 | scene_save UV / analyze_result(success) UV | ≥ 40% |
| 有效浏览率 | result_close(stay≥30s) / analyze_result(success) | ≥ 60% |

**核心漏斗**

```
app_launch → photo_click → photo_complete → analyze_result(ok) → scene_save
   100%    →    40%      →      30%       →        29%         →    12%
```

---

#### 7.6.2 模块二：AI 对话

**北极星指标**

| 指标 | 定义 | 计算公式 | 目标 |
|------|------|----------|------|
| **日均有效对话轮数** | 每 DAU 每天完成的对话轮数 | SUM(dialog_end.total_turns where turns≥3) / DAU | ≥ 6 轮 |

**北极星拆解**

```
日均有效对话轮数 = 对话发起率 × 角色确认率 × 平均轮数 × 完成率
```

| 子指标 | 计算公式 | 目标 |
|--------|----------|------|
| 对话发起率 | dialog_click UV / 可进入对话页面 UV | ≥ 25% |
| 角色确认率 | dialog_start UV / dialog_click UV | ≥ 70% |
| 平均对话轮数 | AVG(dialog_end.total_turns) | ≥ 5 轮 |
| 对话完成率 | dialog_end(turns≥3) / dialog_start | ≥ 60% |
| 语音使用率 | message_send(voice) UV / dialog_start UV | ≥ 30% |

**核心漏斗**

```
dialog_click → dialog_start → message_send → dialog_end(≥3轮)
    100%     →     70%      →     65%      →      45%
```

---

#### 7.6.3 整体健康指标

| 指标 | 计算公式 | 目标 |
|------|----------|------|
| DAU | COUNT(DISTINCT user_id) WHERE app_launch | - |
| 次日留存 | D+1 launch UV / D0 新用户 | ≥ 40% |
| 7日留存 | D+7 launch UV / D0 新用户 | ≥ 20% |
| 日均使用时长 | AVG(session_end.session_duration_ms) | ≥ 5min |

---

### 7.7 后续迭代可加埋点

以下埋点在 MVP 阶段**不需要**，等有具体分析需求再加：

| 分析需求 | 可加埋点 | 触发条件 |
|----------|----------|----------|
| 内容偏好分析 | `tab_switch` | 发现用户只看某个 Tab |
| 翻译依赖分析 | `translation_show` | 想了解翻译使用程度 |
| 筛选/搜索分析 | `filter_apply`, `search` | 场景库数据量大后 |
| 错误详情追踪 | 细分 `_fail` 事件 | 某功能失败率异常时 |
| 页面停留分析 | `page_view` + `page_leave` | 需要分析页面流失时 |

---

## 八、附录

### 8.1 未来版本规划

| 版本 | 主要功能 | 目标 |
|------|----------|------|
| V1.2 | 自由对话（不基于场景的AI语伴）、手动添加笔记 | 扩展练习场景 |
| V2.0 | AI 学习报告、海报分享 | 社交传播，用户增长 |
| V2.1 | 社区功能、成长中心（地图、勋章） | 用户成就感和归属感 |
| V3.0 | AI 个性化学习路径、Freemium 付费 | 商业化 |
| Vn.0 | 雅思/托福/商务专项模式 | 垂直场景扩展 |

**V1.2 自由对话功能预览**
- 入口：首页或场景库页面
- AI 语伴「小语」，不限定特定场景
- 提供话题建议：My hobbies, Travel plans, Daily routine, Favorite movies 等
- 支持语音输入和文字输入

### 8.2 设计规范参考

- 界面风格：简洁、学习沉浸、轻操作
- 参考产品：Notion + Duolingo
- 配色：待设计团队定义
- 字体：系统默认字体

---

## 九、文档修订记录

| 版本 | 日期 | 修订内容 | 作者 |
|------|------|----------|------|
| 1.0 | 2026-01-26 | 初稿 | - |
| 1.1 | 2026-01-26 | 1. 统一术语"我的笔记"；2. 例句卡片改为4个角色；3. 难度分级调整为P2；4. 增加notes表，扩展conversations表；5. 增加单条保存功能；6. 增加对话记录入口 | - |
| 1.2 | 2026-01-30 | 更新技术栈以反映实际实现：1. TTS改为通义千问TTS + iOS原生AVSpeechSynthesizer；2. ASR改为混合方案（iOS原生实时显示 + Paraformer最终分句）；3. 新增qwen-turbo对话模型；4. 数据库支持SQLite/PostgreSQL；5. 对话支持SSE流式输出 | - |

---

**文档结束**
